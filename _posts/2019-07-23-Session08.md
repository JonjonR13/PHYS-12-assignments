---
layout: post
title:  "08: CNC Milling"
permalink: /08/
---

### Header 3

int val;
int read_high;
int read_low;
int diff;
long int sum;
int N_samples = 100;

void setup() {
  
  pinMode(4, OUTPUT);
  pinMode(13, OUTPUT);
  pinMode(12, OUTPUT);
  pinMode(9, OUTPUT);
  pinMode(8, OUTPUT);
  pinMode(6, OUTPUT);
  pinMode(5, OUTPUT);
  Serial.begin(9600);

}

void loop() {

  sum = 0;

  for (int i = 0; i < N_samples; i++) {
    digitalWrite(4, HIGH);             //Step the voltage high on conductor 1.
    read_high = analogRead(A0);        //Measure response of conductor 2.
    delayMicroseconds(100);            //Delay to reach steady state.
    digitalWrite(4, LOW);              //Step the voltage to zero on conductor 1.
    read_low = analogRead(A0);         //Measure response of conductor 2.
    diff = read_high - read_low;       //desired answer is the difference between high and low.
    sum += diff;                       //Sums up N_samples of these measurements.
  }
  
  
  //sum = map(sum, 19, 75, 0, 5);
  Serial.println(sum);
  
  if ( sum >= 13000) {
    digitalWrite(13, HIGH);
    digitalWrite(12, HIGH);
    digitalWrite(9, LOW);
    digitalWrite(8, LOW);
    digitalWrite(6, HIGH);
    delay(10000);

    digitalWrite(13, LOW);
    digitalWrite(12, LOW);
    digitalWrite(9, HIGH);
    digitalWrite(8, HIGH);
    digitalWrite(6, HIGH);
    delay(10000);
    //tone(9, sum);
  } else {
    digitalWrite(13, LOW);
    digitalWrite(12, LOW);
    digitalWrite(9, LOW);
    digitalWrite(8, LOW);
  }







}
<!-- Or, you can also directly include HTML, for example to make a split image -->

<img src="board1.jpg" alt="Board Traces" style="height: 200px; max-width: 48%">
<img src="board2.jpg" alt="Board Interior" style="height: 200px; max-width: 48%">


<!-- You can also use HTML tags to include a video -->
<video width="955" height="541" controls>
	<source src="demo.mp4" type="video/mp4">
</video>

<!-- Or to add a download link to any (reasonably small) file in your permalink directory -->

<a href='cube.stl' download>Click to download my STL file</a>

